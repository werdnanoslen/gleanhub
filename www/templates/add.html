<ion-view view-title="New food op">
    <ion-nav-bar align-title="center" class="bar-positive">
        <ion-nav-back-button ng-hide="keyboardSpace"></ion-nav-back-button>
        <ion-nav-buttons side="left" ng-hide="keyboardSpace">
            <button class="button button-icon button-clear icon ion-map" ui-sref="map" ng-show="noGoingBack"></button>
        </ion-nav-buttons>
        <ion-nav-buttons side="right">
            <button class="button button-clear" ng-click="submitForm()"
                    ng-hide="keyboardSpace">
                Submit
            </button>
        </ion-nav-buttons>
    </ion-nav-bar>
    <ion-content scroll="true" id="mainContainer">
        <div id="formContainer" ng-style="{'margin-top': keyboardSpace}">
            <form class="list" id="addForm" name="addForm">
                <div class="item item-input item-floating-label">
                    <span class="input-label">Where is it?</span>
                    <div class="flex">
                        <input
                            class="flex-item"
                            id="search"
                            name="place"
                            ng-blur="blurWhere($event)"
                            ng-focus="focusWhere($event)"
                            ng-model="form.place"
                            placeholder="Where is it?"
                            type="search"
                        />
                        <button class="flex-item button button-small button-icon icon ion-pinpoint"
                            ng-click="centerOnMe()"
                            ng-show="mapReady">
                        </button>
                    </div>
                </div>
                <div id="mapContainer">
                    <div id="centerMarker" ng-show="isDragging"></div>
                    <ui-gmap-google-map
                         center="map.center"
                         control="map.control"
                         events="map.events"
                         options="map.options"
                         zoom="map.zoom">
                        <ui-gmap-marker
                            coords="map.position.coords"
                            idkey="'map.position.id'"
                            icon="map.position.icon"
                            options="map.position.options">
                        </ui-gmap-marker>
                        <ui-gmap-marker
                            coords="map.search.coords"
                            idkey="'map.search.id'"
                            options="map.markers.options">
                        </ui-gmap-marker>
                    </ui-gmap-google-map>
                </div>
                <label class="item item-input item-floating-label">
                    <span class="input-label">What food was here?</span>
                    <textarea   name="contents"
                                ng-model="form.contents"
                                placeholder="What food was here?"
                                rows="1">
                    </textarea>
                </label>
                <label class="item item-input item-floating-label">
                    <span class="input-label">When is a safe time to dive here?</span>
                    <input  type="text"
                            name="availability"
                            ng-model="form.availability"
                            placeholder="When is a safe time to dive here?"
                    >
                </label>
                <div class="item item-stacked-label">
                    <label class="input-label has-input" for="smell">
                        Was the smell tolerable?
                    </label>
                    <div class="button-bar" id="smell">
                        <a grouped-radio="'yes'" ng-model="form.smell">Yes</a>
                        <a grouped-radio="'no'" ng-model="form.smell">No</a>
                    </div>
                </div>
                <div class="item item-stacked-label">
                    <label class="input-label has-input" for="cleanFood">
                        Was food clean or wrapped?
                    </label>
                    <div class="button-bar" id="smell">
                        <a grouped-radio="'yes'" ng-model="form.cleanFood">Yes</a>
                        <a grouped-radio="'no'" ng-model="form.cleanFood">No</a>
                    </div>
                </div>
                <label class="item item-input item-floating-label">
                    <span class="input-label">Comments</span>
                    <textarea   name="notes"
                                ng-model="form.notes"
                                placeholder="Comments about safety, condition, convenience, or anything else"
                                rows="3">
                </textarea>
            </label>
            <div class="item">
                <div class="fileUpload">
                    <span class="button button-positive button-block" ng-hide="photoPreview">
                        Upload photo
                    </span>
                    <input  type="file" class="upload"
                            ng-model="photo" name="photo" id="photo"
                            accept="image/*" capture="camera"
                            onchange="angular.element(this).scope().previewPhoto()">
                </div>
                <canvas ng-show="photoPreview" id="photoPreview"></canvas>
                <button class="button button-assertive button-block"
                        ng-show="photoPreview" ng-click="removePhoto()">
                    Remove photo
                </button>
            </div>
            </form>
        </div>
    </ion-content>
</ion-view>
